### 实验三 类组合的应用与编程

##### 一、实验目的

理解类组合的方法和编程应用。

##### 二、实验内容


(1) 定义Teacher类，其数据成员包括工号、姓名、性别和生日，其中生日为另一个类BirthDate的对象，定义Teacher类的对象，并给出所有数据成员的初值，然后修改其生日数据，最后输出该对象的全部最新数据。

(2)

① 调试下列程序，写出输出结果，并分析输出结果。

```c++
#include<iostream>
using namespace std;
class Part
{
    public:    
        Part();          //Part的无参构造函数    
        Part (int x);  // Part的有参构造函数    
        ~Part();        //Part的析构函数
    private:
        int val;
};
Part::Part()
{
    val=0;
    cout<<"Part类的默认构造函数被调用"<<endl;
}
Part::Part(int x)
{  
    val=x;
     cout<<"Part类的一个参数的构造函数被调用"<<","<<val<<endl;
}
Part::~Part()
{
    cout<<"Part类的析构函数被调用"<<","<<val<<endl;
}
class Whole
{
    public:    
        Whole(int i);  // Whole的有参构造函数   
        Whole(){};     //Whole的无参构造函数 
        ~Whole();      //Whole的析构函数    
    private:   
        Part p1;  //子对象    
        Part p2; //子对象
};
Whole::Whole(int i):p1(),p2(i)
{
    cout<<"Whole类的构造函数被调用"<<endl;
}
Whole::~Whole()
{
    cout<<"Whole类的析构函数被调用"<<endl;
}
int main()
{  
    Whole(3);//调用有参构造函数
    return 0;
}
```

② 如果在Whole类中增加一个private数据成员Part p3;然后将Whole类的有参构造函数的实现改为

```c++
Whole::Whole(inti):p2(i),p1()
{
	cout<<"Whole类的构造函数被调用"<<endl;
}
```

写出输出结果，并分析输出结果。

###### 操作步骤：

由于本章主要学习了类的组合概念，即在一个类中以另一个类的对象作为数据成员，所以在本Teacher类中，有一个成员函数birthday是另一个类BirthDate的对象，又可知Teacher类，其数据成员包括工号、姓名、性别和生日，生日对象包含了year，month，day等数据成员，类的组合和继承一样，是软件重用的重要方式，能有效地利用已有类的资源，通过这种方法有效地组织和利用现有的类，大大减少了工作量，于是可以进行以下类的声明：

**（1）类的声明**       

```c++
#include <iostream>
using namespace std; 
//生日类
class BirthDate
{
  private:
    int year;		//年
    int month;		//月
    int day;		//日
  public:
    BirthDate(int y,int m,int d):year(y),month(m),day(d)	//使用初始化列表进行赋值
	{
        
	};
    void display1()	//打印输出生日
	{
		cout<<"生日："<<year<<"年"<<month<<"月" <<day<<"日"<<endl;
	};
    void changeDate(int y,int m,int d) //改变生日日期
	{
		year=y;
		month=m;
		day=d;
	}; 
};

//教师类
class Teacher
{
  private:
    string Tid;				//教师编号
    string Tname;			//教师姓名
    string Tsex;			//教师性别
    BirthDate Tbirthday;	 //教师生日 BirthDate类的对象作为数据成员
  public:
    Teacher(string id,string name,string sex,int y,int m,int d):
    	Tid(id),Tname(name),Tsex(sex),Tbirthday(y,m,d)//使用初始化列表进行赋值，生日日期来自Tbirthday类
		{
            
		};
    void display()
	{
		cout<<"教师号："<<Tid<<endl;
		cout<<"教师名："<<Tname<<endl;
		cout<<"性别："<<Tsex<<endl;
		Tbirthday.display1(); //调用BirthDate类中的dispaly1()，来输出内容
	};
    void changeDate(int y,int m,int d)//看似Teacher类改变生日日期，实质上是用Tbirthday来改变
	{
		Tbirthday.changeDate(y,m,d);
	};
};
```

**（2）组合后生日类动态功能实现**

（a）类构造函数初始化列表

有关初始化列表相关知识：

下面的例子中两个构造函数的结果是一样的。上面的构造函数（使用初始化列表的构造函数）显式的初始化类的成员；而没使用初始化列表的构造函数是对类的成员赋值，并没有进行显式的初始化。初始化和赋值对内置类型的成员没有什么大的区别，像上面的任一个构造函数都可以。对非内置类型成员变量，为了避免两次构造，**推荐使用类构造函数初始化列表**。但有的时候必须用带有初始化列表的构造函数：

- 成员类型是**没有默认构造函数的类**。若没有提供显示初始化式，则编译器隐式使用成员类型的默认构造函数，若类没有默认构造函数，则编译器尝试使用默认构造函数将会失败。
- **const 成员**或**引用类型**的成员。因为 const 对象或引用类型只能初始化，不能对他们赋值。

**注意点：**初始化列表的成员初始化顺序：C++ 初始化类成员时，是按照声明的顺序初始化的，而不是按照出现在初始化列表中的顺序。

```c++
BirthDate(int y,int m,int d):year(y),month(m),day(d)
{
        
}
/*
BirthDate(int y,int m,int d)
{
   year=y;
   month=m;
   day=d;     
};
*/
```

（b）打印日期函数

```c++
void display1()	//打印输出生日类
{
	cout<<"生日："<<year<<"年"<<month<<"月" <<day<<"日"<<endl;
}
```

（c）

```c++
void changeDate(int y,int m,int d) //改变生日日期
{
	year=y;
	month=m;
	day=d;
}
```

**（3）主函数**

```c++
int main()
{
    Teacher tra1("09170300","阿霞","女",2004,1,1);
    tra1.dispaly();
    tra1.changeDate(2004.12.12);//能够通过类对象调用改变生日的函数changeDate
    tra1.display;
    return 0;
}
```

###### 整段代码：

**（1）.h文件**

```c++

```

**（2）_main.cpp文件**

```c++

```

###### **运行结果**：

#### 三、实验总结

本次实验主要实践了类的组合、C++格式化输出和选择结构与循环结构的综合应用等知识，实训项目对这些知识点进行简单的编程与应用，拓展训练项目将这些知识点应用到