### 使用C++实现一个矩形类根据矩形左下角和右上角两个坐标求出面积

##### **题目：**

调试下列程序，写出输出结果，并分析输出结果。

```c++
//Point.h文件
#ifndef POINT_H
#define POINT_H
class Point
{
	private:
		float x,y;
	public:
		Point();
		Point(int xx,int yy);
		Point(Point &p); 
		float getX();
		float getY(); 
};
#endif 
//Point.cpp文件
#include <iostream>
#include "Point.h"
using namespace std; 
Point::Point()
{
	x=0;
	y=0;
	cout<<"Point类的默认构造函数被调用"<<endl;
} 
Point::Point(int xx,int yy)
{
	x=xx;
	y=yy;
	cout<<"Point类的两个参数的构造函数被调用"<<xx<<","<<yy<<endl; 
} 
Point::Point(Point &p)
{
	x=p.x;
	y=p.y;
	cout<<"Point类的拷贝构造函数被调用"<<p.x<<","<<p.y<<endl;
}
float Point::getX()
{
	return x;
}
float Point::getY()
{
	return y;
}
//Rectangle.h文件
#include "Point.h" 
#ifndef RECTANGLE_H
#define RECTANGLE_H
class Rectangle
{
	private:
		Point p1;
		Point p2;
	public:
		Rectangle();
		Rectangle(Point xp1,Point xp2);
		Rectangle(Rectangle &rec);
		float computeArea();
};
#endif 
//Rectangle.cpp文件
#include <iostream>
#include "Rectangle.h"
#include <math.h> 
using namespace std;
Rectangle::Rectangle()
{
	cout<<"Rectangle类的默认构造函数被调用"<<endl;
}
Rectangle::Rectangle(Point xp1,Point xp2):p1(xp1),p2(xp2)
{
	cout<<"Rectangle类带有（Point,Point）的构造函数被调用"<<endl;
}
Rectangle::Rectangle(Rectangle &rec):p1(rec.p1),p2(rec.p2)
{
	cout<<"Rectangle类的拷贝构造函数被调用"<<endl;
}
float Rectangle::computeArea()
{
	float length=fabs(p2.getX()-p1.getX());
	float width=fabs(p2.getY()-p1.getY());
	return length*width;
} 
//main.cpp文件
#include <iostream>
#include "Rectangle.h"
using namespace std;
int main() {
	Point p3;
	Point p4(10,20);	
	Rectangle r1(p3,p4);
	cout<<"r1的面积为："<<r1.computeArea()<<endl;
	cout<<"========================"<<endl;
	Rectangle r2=r1;
	cout<<"r2的面积为："<<r2.computeArea()<<endl;
	return 0;
}
```

##### **图形：**

![image-20220916203538331](https://cdn.jsdelivr.net/gh/SanShuiHT-7/Typora-Figure-bed2/image-20220916203538331.png)

##### **运行结果：**

![image-20220917011951122](https://cdn.jsdelivr.net/gh/SanShuiHT-7/Typora-Figure-bed2/image-20220917011951122.png)

##### **分析输出结果：**

答：由题意可知Point类用于存储点坐标，并且Point在Rectangle类中定义的子对象用于进行矩形长宽计算，最后根据矩形面积计算，输出最后的矩形面积。

1、分析类的功能：
①在Point类：
定义了两个float的变量x，y
无参构造函数Point()；功能：初始化点坐标（x,y）=（0，0）
两个参数的构造函数Point(int xx,int yy);
拷贝构造函数Point( Point &p);
获取x坐标函数float getX();
获取y坐标函数float getY(); 
②在Rectangle类：
类的组合，其中定义了p1，p2均为Point的子对象
无参构造函数Rectangle();
两个参数的构造函数Rectangle(Point xp1,Point xp2);
拷贝构造函数Rectangle( Rectangle &rec);
面积计算函数：float computeArea();

2、查看函数的特点：
本题目的主要点在于类的组合里Rectangle类构造函数初始化列表的值传递，以及默认构造函数的调用时机、拷贝构造函数调用时机。

3、main函数中：
①Point p3; 这里只定义了p3对象，并没有赋值，在默认构造函数调用时机中，不指定类初始值时，会调用默认构造函数
显示输出：**Point类的默认构造函数被调用**

②Point p4(10,20); 由于时值传递，因为DevC++编译器时从右到左的方式给形参赋值，系统先后创建出yy，xx接受传入的（10，20），然后形参的赋值给p3本身，局部对象xx，yy在函数执行完后释放，两个参数的构造函数Point(int xx,int yy);被调用完毕。
显示输出：**Point类的两个参数的构造函数被调用**

③以值传递的方式给函数参数传值的时候会调用拷贝构造函数：函数 Rectangle(Point xp1,Point xp2); 的参数是类Point 的对象，那么当 Rectangle(Point xp1,Point xp2); 被调用时，类 Point 的拷贝构造函数将被调用。因为作为形参的对象，是用拷贝构造函数初始化的，而且调用拷贝构造函数时的参数，就是调用函数时所给的实参。换句话说在创建对象时既要对本类的基本类型数据成员进行初始化，又要对子对象成员进行初始化。
所以在创建r1之前先要创建它的点类p1，p2，而他的Point类的对象的初始化是通过形参xp1，xp2传入的，而形参xp1，xp2为类对象，而且是值传递，故系统要先创建出xp2，xp1两个局部Point类的变量来拷贝传入的点类p4，p3。
显示输出：**Point类的拷贝构造函数被调用10,20**			(xp2(p4))
				  **Point类的拷贝构造函数被调用0,0**				(xp1(p3))
注意：如果形参列表中用引用的方式，是不会显示这两句话的。并且当我们提供了拷贝构造函数，系统就不会提供其他函数，所以在p3没有指定初始值的时候，不会调用默认构造函数，而是调用了拷贝构造函数。
然后再按照Rectangle类中定义的顺序先后初始化p1，p2
显示输出：**Point类的拷贝构造函数被调用0,0**				(p1(xp1))
				  **Point类的拷贝构造函数被调用10,20**			(p2(xp2))
最后待r1数据成员创建好了之后就执行函数体内的cout
显示输出：**Rectangle类带有（Point,Point）的构造函数被调用**
总之就是妈妈准备给了我一张6块的一张4块钱买辣条，我套娃我就叫小夏去买。我很调皮，我要让妈妈子分开给，只能先给我4块再给我6块，等钱拿完了，我就把钱给小夏去买，她也有自己的收钱规矩，不过他的可以先要4块再要6块或者反过来，等小夏拿到钱了，通过计算，可以在小卖铺买两包辣条的故事。

④cout<<"r1的面积为："<<r1.computeArea()<<endl;，有值了就可以计算了
显示输出：**r1的面积为：200**

⑤显示输出：**========================**

⑥Rectangle r2=r1; 由于引用的方式(Rectangle &rec)传入r1，故不会启动拷贝构造再创建一个参数对象rec，所以r2就是r1，他们所分配的是同一块空间，只是名字不一样罢了
显示输出：**Point类的拷贝构造函数被调用0,0**     	   (p1(rec.p1))
				  **Point类的拷贝构造函数被调用10,20**		(p2(rec.p2))
				  **Rectangle类的拷贝构造函数被调用**
				  **r2的面积为：200**