## 实验二 类的进一步应用与编程

### 一、实验目的

掌握构造函数的定义方法和作用能熟练运用构造函数进行对象的初始化;

初步掌握对象数组和对象指针的使用方法。

### 二、实验内容

1.建立一个三角形类

(1)用带默认形参值(三条边长均为1的构造函数分别使用默认值和自定义值构造两个对象,并计算两个三角形的面积。

(2)利用带参数的构造函数使用建立动态对象的方法建立两个对象,计算并输出面积后.删除两个对象。

(3)利用拷贝构造函数实现对象间的赋值。

2.创建学生类建立一个对象数组内放5个学生的信息(包括学号、姓名和成绩),编写程序要求:

(1)5个学生的信息在对象初始化时获得;分5行输出学生的信息。

(2)用指针指向数组首地址,输出第1 3 5个学生的数据；

#### 实验步骤

##### 1、三角形类实现思路

###### **操作步骤：**

**（1）Tri类的声明：**           

```c++
class Tri
{		//类的主体		
private://静态属性==》类的数据成员  
	float a;						  //边长1	
	float b;						  //边长2                  
	float c;						  //边长3
	float s;						  //中间值                             
public://动态功能==》类的函数成员					 
	Tri(float a1,float b1,float c1);	//带默认值的构造函数
	float area( );					  //面积计算																
};
```

**（2）三角形类动态功能实现**

（a）带默认值的构造函数

```c++
Tri::Tri(float a1=1,float b1=1,float c1=1)
{
	a=a1;
	b=b1;
	c=c1;
	cout<<"三角形三个边：";
    cout<<"a="<<a<<" "<<"b="<<b<<" "<<"c="<<c<<endl;
}
```

（b）面积计算

```c++
float Tri::area()
{
	s=(a+b+c)/2;
	return (sqrt(s*(s-a)*(s-b)*(s-c)));
}
```

**（3）主函数**

```c++
int main() 
{
	Tri tri1;
	cout<<"三角形面积为：area1="<<tri1.area()<<endl;
	Tri tri2(2,3,4);
	cout<<"三角形面积为：area2="<<tri2.area()<<endl;
	Tri * tri3=new Tri(6,6,6);
	cout<<"三角形面积为：area3="<<tri3->area()<<endl;
	delete tri3;
	Tri * tri4;
	tri4=new Tri(12,13,5);
	cout<<"三角形面积为：area4="<<tri4->area()<<endl;
	delete tri4;
	return 0;
}
```

###### **整段代码：**

Tri.h文件

```c++
#include <iostream>
#include <math.h>
using namespace std;
	class Tri
	{
		private:
			float a;
			float b;
			float c;
			float s;
		public:
			Tri(float a1,float b1,float c1);
			float area();
	};
Tri::Tri(float a1=1,float b1=1,float c1=1)
{
	a=a1;
	b=b1;
	c=c1;
	cout<<"三角形三个边：";
    cout<<"a="<<a<<" "<<"b="<<b<<" "<<"c="<<c<<endl;
}
float Tri::area()
{
	s=(a+b+c)/2;
	return (sqrt(s*(s-a)*(s-b)*(s-c)));
}
```

T ri_main.cpp文件

```c++
#include <iostream>
#include"Tri.h"
using namespace std;
int main() 
{
	Tri tri1;
	cout<<"三角形面积为：area1="<<tri1.area()<<endl;
	Tri tri2(2,3,4);
	cout<<"三角形面积为：area2="<<tri2.area()<<endl;
	Tri * tri3=new Tri(6,6,6);
	cout<<"三角形面积为：area3="<<tri3->area()<<endl;
	delete tri3;
	Tri * tri4;
	tri4=new Tri(12,13,5);
	cout<<"三角形面积为：area4="<<tri4->area()<<endl;
	delete tri4;
	return 0;
}
```

###### **运行结果：**

![image-20220909075425843](https://cdn.jsdelivr.net/gh/SanShuiHT-7/Typora-Figure-bed2/image-20220909075425843.png)

##### 2、学生类实现思路

###### **操作步骤：**

**（1）学生类的声明：**      

```c++
class Student	
{		//类的主体
private://静态属性==》类的数据成员
	string ID;	 						//学号
	string name; 						//姓名
    float score; 						//成绩
public://动态功能==》类的函数成员
	Student(int n,string na,float s);	 //学生数据的初始化
    void display();          			//学生数据的显示
};
```

**（2）类动态功能实现**

（a）学生数据的初始化 ：在类的构造函数中定义形式参数化成员变量的值；在主函数中调用构造函数并传入实参的值。

```c++
Student::Student(string n,string na,float s)
{
    ID=n;
	name=na;
	score=s;
}
Student Stud[5]={
    Student(101,"张三",90),
    Student(102,"李四",91),
    Student(103,"王五",92),
    Student(104,"小明",93),
    Student(105,"小刚",94),
}
```

（b）学生数据的显示：鉴于针对数组元素的重复显示操作，用循环来实现

```c++
void Student::display()
{
    cout<<ID<<","<<name<<","<<score<<endl;
}
```

**（3）主函数**

```c++
int main()
{
    Student Stud[5]=
    {
    	Student(101,"张三",90),
    	Student(102,"李四",91),
    	Student(103,"王五",92),
    	Student(104,"小明",93),
    	Student(105,"小刚",94),
	};
    Student * p=Stud[0];
    for(i=0;i<5;i++)
    {
        (p+i)->display;
    };
    return 0;
}
```

###### **整段代码：**

Student.h文件

```c++
#include <iostream>
using namespace std; 
class Student	
{
private:
	string ID;	                                                                            
	string name; 
    float score;    

public:				 
	Student(string n,string na,float s);	 
    void display();          		
};
Student::Student(string n,string na,float s)
{
    ID=n;
	name=na;
	score=s;
}
void Student::display()
{
    cout<<ID<<","<<name<<","<<score<<endl;
}
```

Student_main.cpp文件

```c++
#include <iostream>
#include "Student.h"
using namespace std; 
int main()
{
	int i;
    Student Stud[5]=
    {
    	Student("101","张三",90),
    	Student("102","李四",91),
    	Student("103","王五",92),
    	Student("104","小明",93),
    	Student("105","小刚",94),
	};
	cout<<"输出5个学生的信息："<<endl;
    Student * p=&Stud[0];
    for(i=0;i<5;i++)
    {
        (p+i)->display();
    };
    cout<<"输出第1、3、5个学生的信息："<<endl;
    Student * p1=&Stud[0];
    for(i=0;i<5;i=i+2)
    {
        (p1+i)->display();
    };
    return 0;
}
```

###### **运行结果：**

##### ![image-20220908180858804](https://cdn.jsdelivr.net/gh/SanShuiHT-7/Typora-Figure-bed2/image-20220908180858804.png)

##### 3、实验总结

本次实验中我了解了构造函数的声明和定义，并且在实验的过程中出现错误 [Error] default argument given for parameter 1 of ‘XXX::XXX(类型，类型，类型)‘ [-fpermissive]，最后发现错误原因：函数的声明和定义中的参数都有赋值，.h文件中函数声明里参数有赋值 Tri(float a1=1,float b1=1,float c1=1)；.cpp文件中函数定义里参数有赋值 Tri::Tri(float a1=1,float b1=1,float c1=1)。二、解决办法：去掉.h文件中函数声明里参数赋值，保留.cpp文件中函数定义里参数赋值。.h文件中函数声明里参数有赋值 Tri(float a1,float b1,float c1)；.cpp文件中函数定义里参数有赋值 Tri::Tri(float a1=1,float b1=1,float c1=1)；

